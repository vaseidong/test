<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html" />
<title> </title>
<style>
div{width:100px;height:100px;background:pink;position:absolute;top:100px;}
#div1{left:100px;}
#div2{left:220px;}
</style>
<script >
window.onload=function(){
        var aDiv=document.getElementsByTagName('div');
        
        var arr=[];
        var num=0;
        
        var toparr=[];        //记录各个div的top值，存入数组
        for (var i=0;i<aDiv.length ;i++ )
        {
                toparr.push(parseInt(getStyle(aDiv[i],'top')));

        }

        for (var i=20;i>0 ;i-=2)  //运动频率
        {
                arr.push( i, -i );
        }
        arr.push(0);
        
        for (var i=0;i< aDiv.length;i++ )
        {
                aDiv[i].index=i;
                aDiv[i].onmouseover=function(){
                
                        shake(this,'top',toparr[this.index]);
                };
                
        }

        function getStyle(obj,attr){
                return obj.currentStyle?obj.currentStyle[attr]:getComputedStyle(obj)[attr];
        
        }

        //抖函数封装
        function shake(obj,attr,currentpos,endFn){
                clearInterval(obj.timer);
                obj.timer=setInterval(function(){
                        var pos=currentpos+arr[num];
                        obj.style[attr]=pos+'px';
                        num++;
                        if (num==arr.length)
                        {
                                num=0;
                                clearInterval(obj.timer);
                                endFn&&endFn();
                        }
                
                },50);

        }
}
</script>
</head>

<body>
    <div id="div1"></div>
    <div id="div2"></div>
</body>
</HTML>
